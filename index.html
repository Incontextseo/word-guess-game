<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
  <title>Word Guess Game - TV Show
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>

<body>
    <div class="wrapper">
        <h1>Word Guess Game</h1>
         <p>Press any key to get started!</p>
     </div><br/>
     <div class="wrapper">
         <div>Wins: <span id="wins">0</span>
            <p id="winner"></p>
         </div><br/>
         <div id="word">
         </div>
         <hr>
         <p>Incorrect Guesses: <span id="wrong-letter"></span></p>
        <p>Guesses Remaining: <span id="guesses">10</span></p>
         <hr> 
           <button id="reset">Play again</button>
         </div>
     </div>
<!-- <script src="game.js" crossorigin="anonymous"></script> -->
<script>

    // Creates an array of possible words for word-guess-game //
    
    var tvShows = [
        "friends",
        "cheers",
        "frasier",
        "ellen",
        "seinfeld",
        "blossom",
        "sabrina",
        "simpsons",
        "rugrats",
        "er",
        "roseanne",
        "arthur",
    ]
    
    
    // Randomly selects string from var tvShows //
    
    var show = tvShows[Math.floor(Math.random() * tvShows.length)];
    var rightLetter = [];
    var wrongLetter = [];
    var underscore = [];
    var remainingGuess = 10;
    var winsTotal = 0;
    var winnerText = "";
    var usedLetter = [];
    
    var winsTotalText = document.getElementById("wins");
    var underscoreText = document.getElementById("word");
    var wrongLetterText = document.getElementById("wrong-letter");
    var guessesLeftText = document.getElementById("guesses");
    var resetButton = document.getElementById("reset");
    var winnerText = document.getElementById("winner");

    console.log(show)
    
    // Creates underscores based on length of word //
    var makeUnderscore = () => {
        underscore = []
        for (var i=0; i<show.length; i++) {
            underscore.push(" _ ");
        }
        return underscore;
        }
    
    console.log(makeUnderscore());
    
    
    // Record keys user presses //
    
    document.onkeyup = function() {
        var userGuess = String.fromCharCode(event.keyCode).
        toLowerCase();
      
    
    // Determines if userGuess is found in word, pushes to rightLetter or wrongLetter array //   
    console.log(userGuess)
        if(show.indexOf(userGuess) > -1) {
            for (var w = 0; w < show.length; w++) {
                if (show[w] === userGuess) {
    
    // Replaces underscores with correct user guesses //
                    underscore[w] = userGuess;
                    rightLetter.push(userGuess);
                    console.log(show[w])
                    console.log("In word");
                    console.log(show.indexOf(userGuess));
                    console.log(rightLetter);
                    console.log(underscore);

                }

            }
        } else if (wrongLetter.includes(userGuess)) {
            usedLetter.push(userGuess);
            console.log(usedLetter);
        } else {
            wrongLetter.push(userGuess);
            remainingGuess--;
                    console.log(wrongLetter);   
                    console.log("Not in word");
        }

        console.log(typeof remainingGuess)
        guessesLeftText.textContent = remainingGuess;
        if (remainingGuess < 1) {
            console.log(typeof remainingGuess)
                guessesLeftText.innerHTML = "Game Over";
                console.log("Game Over")
 
        }
        
        console.log("underscoreText=" + underscore.join(''))
        if (underscore.join('') === show) {
            winnerText.innerHTML = "You Won!";
            winsTotal++;
                console.log(winsTotal)
                console.log("underscoreText=" + underscore.join(''))

        }
        // Moving all elements to the DOM
        winsTotalText.textContent = winsTotal
        underscoreText.textContent = underscore.join(' ');
        wrongLetterText.textContent = wrongLetter;

    }



    resetButton.addEventListener("click", function(){
        show = ""
        show = tvShows[Math.floor(Math.random() * tvShows.length)];
        console.log(show)
        guessesLeftText.textContent = 10;
        winnerText.innerHTML = ''
        wrongLetter = []
        makeUnderscore();
        underscoreText.textContent = underscore.join(' ');
        wrongLetterText.textContext = wrongLetter
    })

    underscoreText.textContent = underscore.join(' ');

    </script>
</body>

</html>